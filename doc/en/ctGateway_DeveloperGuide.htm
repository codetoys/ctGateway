
<!-- saved from url=(0064)file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="Generator" content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:等线;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"等线 Light";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@等线 Light";}
@font-face
	{font-family:"\@等线";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:等线;}
h1
	{mso-style-link:"标题 1 字符";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:21.6pt;
	text-indent:-21.6pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:24.0pt;
	font-family:"等线 Light";
	color:#0F4761;
	font-weight:normal;}
h2
	{mso-style-link:"标题 2 字符";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:28.8pt;
	text-indent:-28.8pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:20.0pt;
	font-family:"等线 Light";
	color:#0F4761;
	font-weight:normal;}
h3
	{mso-style-link:"标题 3 字符";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:36.0pt;
	text-indent:-36.0pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";
	color:#0F4761;
	font-weight:normal;}
h4
	{mso-style-link:"标题 4 字符";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:43.2pt;
	text-indent:-43.2pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:等线;
	color:#0F4761;
	font-weight:normal;}
h5
	{mso-style-link:"标题 5 字符";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:50.4pt;
	text-indent:-50.4pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:等线;
	color:#0F4761;
	font-weight:normal;}
h6
	{mso-style-link:"标题 6 字符";
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:57.6pt;
	text-indent:-57.6pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:等线;
	color:#0F4761;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"标题 7 字符";
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:64.8pt;
	text-indent:-64.8pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:等线;
	color:#595959;
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"标题 8 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	text-indent:-72.0pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:等线;
	color:#595959;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"标题 9 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:79.2pt;
	text-indent:-79.2pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:等线;
	color:#595959;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:等线;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:21.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:等线;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:42.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:等线;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"标题 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:28.0pt;
	font-family:"等线 Light";
	letter-spacing:-.5pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"标题 字符";
	margin:0cm;
	text-align:center;
	font-size:28.0pt;
	font-family:"等线 Light";
	letter-spacing:-.5pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"标题 字符";
	margin:0cm;
	text-align:center;
	font-size:28.0pt;
	font-family:"等线 Light";
	letter-spacing:-.5pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"标题 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:28.0pt;
	font-family:"等线 Light";
	letter-spacing:-.5pt;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"副标题 字符";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:115%;
	font-size:14.0pt;
	font-family:"等线 Light";
	color:#595959;
	letter-spacing:.75pt;}
a:link, span.MsoHyperlink
	{color:#467886;
	text-decoration:underline;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";
	color:#0F4761;}
span.1
	{mso-style-name:"标题 1 字符";
	mso-style-link:"标题 1";
	font-family:"等线 Light";
	color:#0F4761;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-link:"标题 2";
	font-family:"等线 Light";
	color:#0F4761;}
span.3
	{mso-style-name:"标题 3 字符";
	mso-style-link:"标题 3";
	font-family:"等线 Light";
	color:#0F4761;}
span.4
	{mso-style-name:"标题 4 字符";
	mso-style-link:"标题 4";
	font-family:"Times New Roman",serif;
	color:#0F4761;}
span.a
	{mso-style-name:"标题 字符";
	mso-style-link:标题;
	font-family:"等线 Light";
	letter-spacing:-.5pt;}
span.a0
	{mso-style-name:"副标题 字符";
	mso-style-link:副标题;
	font-family:"等线 Light";
	color:#595959;
	letter-spacing:.75pt;}
.MsoChpDefault
	{font-size:11.0pt;
	font-family:等线;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang="ZH-CN" link="#467886" vlink="#96607D" style="word-wrap:break-word;
text-justify-trim:punctuation">

<div class="WordSection1" style="layout-grid:15.6pt">

<p class="MsoTitle" _msttexthash="640991" _msthash="0"><span lang="EN-US" _istranslated="1">ctGateway Development Guide</span></p>

<p class="MsoSubtitle" _msttexthash="253929" _msthash="1"><span lang="EN-US" _istranslated="1">2025.4.25 </span>Release <span lang="EN-US" _istranslated="1">1</span></p>

<p class="MsoTocHeading" _msttexthash="141843" _msthash="2">directory</p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505346"><font _mstmutation="1" _msttexthash="133653" _msthash="3"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 1 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Overview</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="4">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4550" _msthidden="1" _msthash="5">2</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505347"><font _mstmutation="1" _msttexthash="202137" _msthash="6"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 2 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Preparation</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="7">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4550" _msthidden="1" _msthash="8">2</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505348"><font _mstmutation="1" _msttexthash="1791179" _msthash="9"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 3 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Install dependent tools and third-party libraries</span></span></font><span style="color:windowtext;display:
none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="10">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="11">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505349"><font _mstmutation="1" _msttexthash="72800" _msthash="12">3.1<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Make</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="13">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="14">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505350"><font _mstmutation="1" _msttexthash="41522" _msthash="15">3.2<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>g++</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="16">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="17">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505351"><font _mstmutation="1" _msttexthash="79638" _msthash="18">3.3<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>zlib</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="19">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="20">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505352"><font _mstmutation="1" _msttexthash="103610" _msthash="21">3.4<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>unzip</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="22">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="23">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505353"><font _mstmutation="1" _msttexthash="308841" _msthash="24">3.5<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>libssl(OpenSSL)</font><span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="25">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505354"><font _mstmutation="1" _msttexthash="314275" _msthash="26">3.6<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mosquitto(MQTT)</font><span style="color:windowtext;display:none;text-decoration:none"> </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4641" _msthidden="1" _msthash="27">3</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505355"><font _mstmutation="1" _msttexthash="58838" _msthash="28">3.7<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gdb</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="29">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4732" _msthidden="1" _msthash="30">4</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505356"><font _mstmutation="1" _msttexthash="647426" _msthash="31">3.8<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>libmodbus_rtu_over_tcp</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="32">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4732" _msthidden="1" _msthash="33">4</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505357"><font _mstmutation="1" _msttexthash="201890" _msthash="34"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 4 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Compilation</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="35">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4732" _msthidden="1" _msthash="36">4</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505358"><font _mstmutation="1" _msttexthash="41340" _msthash="37"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 5 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Run</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="38">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4914" _msthidden="1" _msthash="39">6</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505359"><font _mstmutation="1" _msttexthash="374400" _msthash="40"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 6 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Cross-compilation</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="41">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4914" _msthidden="1" _msthash="42">6</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505360"><font _mstmutation="1" _msttexthash="447954" _msthash="43"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 7 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Source Code Structure</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="44">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5005" _msthidden="1" _msthash="45">7</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505361"><font _mstmutation="1" _msttexthash="187759" _msthash="46">7.1<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ctGateway</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="47">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5005" _msthidden="1" _msthash="48">7</span></a></span></p>

<p class="MsoToc3" style="margin-left:44.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505362"><font _mstmutation="1" _msttexthash="126321" _msthash="49">7.1.1<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>third</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="50">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5005" _msthidden="1" _msthash="51">7</span></a></span></p>

<p class="MsoToc3" style="margin-left:44.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505363"><font _mstmutation="1" _msttexthash="81081" _msthash="52">7.1.2<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>lib</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="8970" _msthidden="1" _msthash="53">.. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5005" _msthidden="1" _msthash="54">7</span></a></span></p>

<p class="MsoToc3" style="margin-left:44.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505364"><font _mstmutation="1" _msttexthash="176566" _msthash="55">7.1.3<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>gateway</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="56">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5005" _msthidden="1" _msthash="57">7</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505365"><font _mstmutation="1" _msttexthash="59956" _msthash="58">7.2<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>doc</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="59">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5096" _msthidden="1" _msthash="60">8</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505366"><font _mstmutation="1" _msttexthash="236184" _msthash="61">7.3<span style="color:windowtext;text-decoration:none" _mstmutation="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ManageTools</font><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="62">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5096" _msthidden="1" _msthash="63">8</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505367"><font _mstmutation="1" _msttexthash="845468" _msthash="64"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 8. <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Simulation of the whole process</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="65">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5096" _msthidden="1" _msthash="66">8</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505368"><font _mstmutation="1" _msttexthash="484874" _msthash="67">8.1<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Create an MQTT</span></span> <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">service</span></span></font><span style="color:windowtext;display:none;
text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="68">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5096" _msthidden="1" _msthash="69">8</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505369"><font _mstmutation="1" _msttexthash="1047332" _msthash="70">8.2<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Run the gateway program in test mode</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="71">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="5187" _msthidden="1" _msthash="72">9</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505370"><font _mstmutation="1" _msttexthash="825227" _msthash="73">8.3<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Modify the configuration file</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="74">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9451" _msthidden="1" _msthash="75">10</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505371"><font _mstmutation="1" _msttexthash="322790" _msthash="76">8.4<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1">  </span>MQTT
Topic <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">rules</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="77">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9555" _msthidden="1" _msthash="78">11</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505372"><font _mstmutation="1" _msttexthash="1378624" _msthash="79"><span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span> 9 <span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Use the gateway management tool ManageTools</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="80">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9555" _msthidden="1" _msthash="81">11</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505373"><font _mstmutation="1" _msttexthash="671658" _msthash="82">9.1<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Compiling and Configuring</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="83">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9555" _msthidden="1" _msthash="84">11</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505374"><font _mstmutation="1" _msttexthash="144820" _msthash="85">9.2<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Startup</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="86">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9659" _msthidden="1" _msthash="87">12</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505375"><font _mstmutation="1" _msttexthash="288977" _msthash="88">9.3<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Main Interface</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="89">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9763" _msthidden="1" _msthash="90">13</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505376"><font _mstmutation="1" _msttexthash="326534" _msthash="91">9.4<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Gateway Details</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="92">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9763" _msthidden="1" _msthash="93">13</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505377"><font _mstmutation="1" _msttexthash="518011" _msthash="94">9.5<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">File Synchronization</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="95">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9867" _msthidden="1" _msthash="96">14</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505378"><font _mstmutation="1" _msttexthash="2033343" _msthash="97">9.6<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">View the internal information of the gateway program</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="98">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9867" _msthidden="1" _msthash="99">14</span></a></span></p>

<p class="MsoToc1"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505379"><font _mstmutation="1" _msttexthash="502840" _msthash="100">10<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Source Code Guidelines</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="101">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9971" _msthidden="1" _msthash="102">15</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505380"><font _mstmutation="1" _msttexthash="225082" _msthash="103">10.1<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Compile CTFC</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="104">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9971" _msthidden="1" _msthash="105">15</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505381"><font _mstmutation="1" _msttexthash="358878" _msthash="106">10.2<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Compile gateway</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="4186" _msthidden="1" _msthash="107">. </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9971" _msthidden="1" _msthash="108">15</span></a></span></p>

<p class="MsoToc2" style="margin-left:22.0pt"><span lang="EN-US"><a href="file:///C:/working/ctGateway/doc/zh/ctGateway_DeveloperGuide.htm#_Toc196505382"><font _mstmutation="1" _msttexthash="620373" _msthash="109">10.3<span style="color:windowtext;text-decoration:none" _mstmutation="1" _istranslated="1"> </span><span lang="EN-US" _mstmutation="1" _istranslated="1"><span lang="EN-US" _istranslated="1">Source Code Entry Points</span></span></font><span style="color:windowtext;
display:none;text-decoration:none" _msttexthash="20332" _msthidden="1" _msthash="110">.... </span><span style="color:windowtext;display:none;text-decoration:none" _msttexthash="9971" _msthidden="1" _msthash="111">15</span></a></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<h1><a name="_Toc196505346" _msttexthash="133653" _msthash="112"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>1</span> Overview</a></h1>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="7780643" _msthash="113">The <span lang="EN-US" _istranslated="1">GIT</span> library of the project includes three directories: gateway program, gateway management tools, and documents.</p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="6601621" _msthash="114">The gateway management tool is a <span lang="EN-US" _istranslated="1">C#</span> project, <span lang="EN-US" _istranslated="1">a windows</span> program, and is currently only used as a secondary tool.</p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="4868435" _msthash="115">The gateway program is located in <span lang="EN-US" _istranslated="1">the ctGateway</span> directory (with the same name as the project).</p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="2534493" _msthash="116">The gateway program runs on <span lang="EN-US" _istranslated="1">Linux</span> and supports <span lang="EN-US" _istranslated="1">x86-64</span>, <span lang="EN-US" _istranslated="1">Arm</span>, <span lang="EN-US" _istranslated="1">and Arm64</span>.</p>

<h1><a name="_Toc196505347" _msttexthash="202137" _msthash="117"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>2</span> Preparation</a></h1>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="16804333" _msthash="118">The gateway program is compiled and run on <span lang="EN-US" _istranslated="1">linux</span>, it is recommended to use <span lang="EN-US" _istranslated="1">Ubuntu 18.04</span>, which can be downloaded <span lang="EN-US" _istranslated="1">from the</span> <span lang="EN-US" _istranslated="1">Ubuntu</span> official website ubuntu-18.04.6-live-server-amd64.iso.</p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="5986656" _msthash="119"><span lang="EN-US" _istranslated="1">Visual Studio </span>projects are only used to edit the source code, and you need to use <span lang="EN-US" _istranslated="1">VS 2022</span>, Community Edition.</p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="6011278" _msthash="120">Depends on the following third-party libraries (you need to download the source code for compilation):</p>

<table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="border-collapse:collapse;border:none">
 <tbody><tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  background:#0F9ED5;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span style="color:black" _msttexthash="45981" _msthash="121">name</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-left:none;background:#0F9ED5;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span style="color:black" _msttexthash="100451" _msthash="122">version</span></p>
  </td>
 </tr>
 <tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="100503" _msthash="123">openssl</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="44655" _msthash="124">1.1.1k</span></p>
  </td>
 </tr>
 <tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="47359" _msthash="125">zlib</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="35724" _msthash="126">1.2.11</span></p>
  </td>
 </tr>
 <tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="145080" _msthash="127">mosquitto</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="36673" _msthash="128">2.0.18</span></p>
  </td>
 </tr>
 <tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="499603" _msthash="129">libmodbus-rtu-over-tcp</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal" _msttexthash="1670643" _msthash="130">If the version is not clear, take the latest version</p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="10548122" _msthash="131">You can install third-party libraries and dependent utilities as needed if you encounter problems with the compilation gateway program.</font></p>

<h1><a name="_Toc196505348" _msttexthash="1791179" _msthash="132"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>3</span> Install dependent tools and third-party libraries</a></h1>

<h2><a name="_Toc196505349" _msttexthash="72800" _msthash="133"><span lang="EN-US">3.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">Make</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="4991155" _msthash="134">The minimized <span lang="EN-US" _istranslated="1">ubuntu</span> installation does not have a compilation tool and needs to be installed.</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="388284" _msthash="135">sudo apt install make</span></p>

<h2><a name="_Toc196505350" _msttexthash="41522" _msthash="136"><span lang="EN-US">3.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">g++</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="4674488" _msthash="137">To install <span lang="EN-US" _istranslated="1">the g++</span> compiler, you need to support <span lang="EN-US" _istranslated="1">C++11</span> (of course, it is generally supported).</p>

<p class="MsoNormal" _msttexthash="2483845" _msthash="138"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">sudo apt install
build-essential</span><span lang="EN-US" _istranslated="1"> </span>(<span lang="EN-US" _istranslated="1">g++</span>, this should include <span lang="EN-US" _istranslated="1">make</span>)</p>

<h2><a name="_Toc196505351" _msttexthash="79638" _msthash="139"><span lang="EN-US">3.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">zlib</span></a></h2>

<p class="MsoNormal" _msttexthash="1340469" _msthash="140"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">sudo apt install
zlib1g-dev</span><span lang="EN-US" _istranslated="1"> </span>(<span lang="EN-US" _istranslated="1">solve-lz</span> needed)</p>

<h2><a name="_Toc196505352" _msttexthash="103610" _msthash="141"><span lang="EN-US">3.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">unzip</span></a></h2>

<p class="MsoNormal" _msttexthash="4670640" _msthash="142"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">sudo apt install
unzip</span><span lang="EN-US" _istranslated="1"> </span>(required <span lang="EN-US" _istranslated="1">for installation libmodbus_rtu_over_tcp-master.zip</span>)</p>

<h2><a name="_Toc196505353" _msttexthash="308841" _msthash="143"><span lang="EN-US">3.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">libssl(OpenSSL)</span></a></h2>

<p class="MsoNormal" _msttexthash="3811275" _msthash="144"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">sudo apt install
libssl-dev</span><span lang="EN-US" _istranslated="1"> </span>(headers and libraries are not installed by default)</p>

<h2><a name="_Toc196505354" _msttexthash="314275" _msthash="145"><span lang="EN-US">3.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">mosquitto(MQTT)</span></a></h2>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="771290" _msthash="146">tar -zxvf
mosquitto-2.0.18.tar.gz</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="284050" _msthash="147">cd mosquitto-2.0.18</span></p>

<p class="MsoNormal" _msttexthash="695019" _msthash="148">Modify <span lang="EN-US" _istranslated="1">config.mk WITH_CJSON:=no</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="45656" _msthash="149">make</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="293384" _msthash="150">sudo make install</span></p>

<h2><a name="_Toc196505355" _msttexthash="58838" _msthash="151"><span lang="EN-US">3.7<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">gdb</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="3336918" _msthash="152"><span lang="EN-US" _istranslated="1">The gdb</span> debugging tool, which is often used in development, is not required.</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="353301" _msthash="153">sudo apt install gdb</span></p>

<h2><a name="_Toc196505356" _msttexthash="647426" _msthash="154"><span lang="EN-US">3.8<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">libmodbus_rtu_over_tcp</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="2288390" _msthash="155">This is a derivative of <span lang="EN-US" _istranslated="1">libmodbus</span> that supports <span lang="EN-US" _istranslated="1">rtu over tcp</span>.</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1310816" _msthash="156">unzip
libmodbus_rtu_over_tcp-master.zip</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="930930" _msthash="157">cd
libmodbus_rtu_over_tcp-master</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="156000" _msthash="158">chmod 755 *.sh</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="186095" _msthash="159">./autogen.sh</span></p>

<p class="MsoNormal" _msttexthash="5001230" _msthash="160">If <span lang="EN-US" _istranslated="1">autoconif</span> is not installed,<span lang="EN-US" _istranslated="1"> then sudo apt-get install autoconf libtool </span>and <span lang="EN-US" _istranslated="1">re-autogen.sh ./</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="172068" _msthash="161">./configure </span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="183625" _msthash="162">make install</span></p>

<h1><a name="_Toc196505357" _msttexthash="201890" _msthash="163"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>4</span> Compilation</a></h1>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="25671789" _msthash="164">The environment may need to be set up in advance, such as enabling <span lang="EN-US" _istranslated="1">the coredump</span> file, adding the current directory to the environment variables, and setting <span lang="EN-US" _istranslated="1">the LD_LIBRARY_PATH</span>, which is roughly similar to the following code:</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="345878" _msthash="165">ulimit -c unlimited</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="276250" _msthash="166">export PATH=.:$PATH</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1907269" _msthash="167">export
LD_LIBRARY_PATH=/usr/local/lib/:$LD_LIBRARY_PATH</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="3008122" _msthash="168">This can be done in <span lang="EN-US" _mstmutation="1" _istranslated="1">a .profile</span>, or it can be done manually after each login.</font></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="30389268" _msthash="169">Upload the <span lang="EN-US" _mstmutation="1" _istranslated="1">gageway</span>, <span lang="EN-US" _mstmutation="1" _istranslated="1">lib</span> and <span lang="EN-US" _mstmutation="1" _istranslated="1">third</span> directories in the <span lang="EN-US" _mstmutation="1" _istranslated="1">ctGateway</span> directory of the source code to <span lang="EN-US" _mstmutation="1" _istranslated="1">the my</span> directory in the user's home directory (of course, you can choose other directories, but the following code needs to be modified accordingly):</font></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="19409" _msthash="170">cd</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="581230" _msthash="171">cd
my/third/ctfc/platform</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="720915" _msthash="172">make -f makefile.mk
linux debug</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="92716" _msthash="173">cd .. /src</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="156000" _msthash="174">chmod 755 *.sh</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="147056" _msthash="175">makeall.sh</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="296504" _msthash="176">cd .. /.. /.. /gateway</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="156000" _msthash="177">chmod 755 *.sh</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="147056" _msthash="178">makeall.sh</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="3022695" _msthash="179">If the compilation is successful, the final output will look like this:</font></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="25457835" _msthash="180">date; date; g++ -g
-L.. /.. /lib/ -o gwmain.exe gwmain_t.o -Wl,-E -L.. /.. /third/ctfc/lib/ -lgwmain
-lgwbuiltin -lmodbus -lmyhttpd -lenv -lmosquittopp -lmosquitto -lgmssl -lssl
-lcrypto -lz -lpthread -ldl -latomic -lstdc++</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="338936" _msthash="181">Thu Apr 24 21:33:26
CST 2025</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="338936" _msthash="182">Thu Apr 24 21:33:26
CST 2025</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="492401" _msthash="183">date; mv gwmain.exe
.. /bin</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="338936" _msthash="184">Thu Apr 24 21:33:26
CST 2025</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="2270359" _msthash="185">make[1]: Leaving
directory '/home/user/my/gateway/gwmain'</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5">--------</span><span style="color:#0F9ED5" _msttexthash="1420328" _msthash="186">The compilation directory<span lang="EN-US" _istranslated="1"> gwmain </span>is complete</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="662688" _msthash="187">gwBuiltIn gwprotocol
gwmain</span></p>

<p class="MsoNormal"><span style="color:#0F9ED5" _msttexthash="23781407" _msthash="188">Check the results。。。。。。</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="338936" _msthash="189">Thu Apr 24 21:33:26
CST 2025</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="111670" _msthash="190">total 27356</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1748734" _msthash="191">-rw-rw-r-- 1 user
user&nbsp; 9147734 Apr 24 21:33 libgwbuiltin.a</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1554111" _msthash="192">-rw-rw-r-- 1 user
user 17686232 Apr 24 21:33 libgwmain.a</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="2196012" _msthash="193">-rwxrwxr-x 1 user
user&nbsp; 1034128 Apr 24 21:33 libprotocol_demo.so</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1647113" _msthash="194">-rwxrwxr-x 1 user
user&nbsp;&nbsp; 118168 Apr 24 21:33 libtestso2.so</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1560741" _msthash="195">-rwxrwxr-x 1 user
user&nbsp;&nbsp;&nbsp; 12512 Apr 24 21:33 libtestso.so</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1244802" _msthash="196">-rw-rw-r-- 1 user
user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12 Apr 22 22:23 readme.txt</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="102492" _msthash="197">total 8696</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="1491360" _msthash="198">-rwxrwxr-x 1 user
user 8903944 Apr 24 21:33 gwmain.exe</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="29188458" _msthash="199">bin/gwmain.exe: ELF
64-bit LSB shared object, x86-64, version 1 (GNU/Linux), dynamically linked, interpreter
/lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0,
BuildID[sha1]=00f6bf8238b570b89db1837e76c4da07c97ba672, with debug_info, not
stripped</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="723138" _msthash="200">user@vm-ubuntu:~/my/gateway$</span></p>

<h1><a name="_Toc196505358" _msttexthash="41340" _msthash="201"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>5</span> Run</a></h1>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="1056939" _msthash="202">Copy <span lang="EN-US" _istranslated="1">the SN</span> file, otherwise it won't run:</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="858143" _msthash="203">cd ; sudo cp
my/gateway/home/* /home/</span></p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="5249478" _msthash="204">After the compilation is successful, go to the <span lang="EN-US" _istranslated="1">publish</span> directory and run the following command:</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="309179" _msthash="205">.. /bin/gwmain.exe</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="3054844" _msthash="206">If the program is able to run, the first few lines will output as follows:</font></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="2854033" _msthash="207">user@vm-ubuntu:~/my/gateway/publish$
.. /bin/gwmain.exe $1 $2 $3 $4 $5 $6 $7 $8 $9</span></p>

<p class="MsoNormal" _msttexthash="3972735" _msthash="208"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-24
22:19:28 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_t.cpp 
: 133(_main)][0.00]</span>endian:<span lang="EN-US" _istranslated="1">Little-Endian</span></span></p>

<p class="MsoNormal" _msttexthash="4635618" _msthash="209"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-24
22:19:28 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_t.cpp 
: 150(_main)][0.00]</span> Gateway version<span lang="EN-US" _istranslated="1"> 1.0.0 2025.04.15 14:39</span></span></p>

<p class="MsoNormal" _msttexthash="7248501" _msthash="210"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-24
22:19:28 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_t.cpp 
: 152(_main)][0.00]</span>working directory<span lang="EN-US" _istranslated="1"> /home/user/my/gateway/publish</span></span></p>

<h1><a name="_Toc196505359" _msttexthash="374400" _msthash="211"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>6</span> Cross-compilation</a></h1>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="28089945" _msthash="212">This project has been compiled under different <span lang="EN-US" _istranslated="1">arm32</span> and <span lang="EN-US" _istranslated="1">arm64</span> cross-compilation toolchains, in principle, there is nothing special, just cross-compile all dependent libraries and programs according to the conventional method.</p>

<h1><a name="_Toc196505360" _msttexthash="447954" _msthash="213"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>7</span> Source Code Structure</a></h1>

<h2><a name="_Toc196505361" _msttexthash="187759" _msthash="214"><span lang="EN-US">7.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">ctGateway</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="275847" _msthash="215">Gateway program.</p>

<h3><a name="_Toc196505362" _msttexthash="126321" _msthash="216"><span lang="EN-US">7.1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">third</span></a></h3>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="52954863" _msthash="217">Third-party dependency libraries, <span lang="EN-US" _istranslated="1">where CTFC</span> is a <span lang="EN-US" _istranslated="1">Git</span> submodule, contains the common code base and compilation system. The rest of the directories are headers of dependent third-party libraries to facilitate writing code, but be careful that these headers must be of the same version as the linked third-party libraries.</p>

<h4 _msttexthash="127699" _msthash="218"><span lang="EN-US">7.1.1.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">ctfc</span></h4>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="4585997" _msthash="219">In addition to <span lang="EN-US" _istranslated="1">the functions of CTFC</span>, this project also uses <span lang="EN-US" _istranslated="1">the compilation system of CTFC</span>.</p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt" _msttexthash="28432365" _msthash="220">The compilation script is located in <span lang="EN-US" _istranslated="1">ctfc/platform</span>, the core is the <span lang="EN-US" _istranslated="1">config.mk</span>, the characteristics of each platform are defined by a separate <span lang="EN-US" _istranslated="1">.mk</span> file, such as <span lang="EN-US" _istranslated="1">linux.mk</span>, and the optimization switch is defined by <span lang="EN-US" _istranslated="1">the fast.mk</span> and <span lang="EN-US" _istranslated="1">debug.mk</span>.</p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt" _msttexthash="12344059" _msthash="221"><span lang="EN-US" _istranslated="1">The function of makefile.mk</span> is actually to replicate the platform configuration and optimization configuration to the <span lang="EN-US" _istranslated="1">platform.mk</span> and <span lang="EN-US" _istranslated="1">optimize.mk</span>.</p>

<p class="MsoNormal" style="margin-left:21.0pt;text-indent:21.0pt" _msttexthash="20094477" _msthash="222"><span lang="EN-US" _istranslated="1">The arm.mk</span> and <span lang="EN-US" _istranslated="1">arm64.mk</span> in the source code are configurations of two specific cross-compilation toolchains, and are meaningless unless they happen to use the same cross-compilation toolchain.</p>

<h3><a name="_Toc196505363" _msttexthash="81081" _msthash="223"><span lang="EN-US">7.1.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">lib</span></a></h3>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="2251236" _msthash="224">This directory is used to output the compiled library files.</p>

<h3><a name="_Toc196505364" _msttexthash="176566" _msthash="225"><span lang="EN-US">7.1.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">gateway</span></a></h3>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="922311" _msthash="226">Source code for the gateway program.</p>

<h4 _msttexthash="258583" _msthash="227"><span lang="EN-US">7.1.3.1<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">gwBuiltIn</span></h4>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="4918147" _msthash="228">Built-in protocols, including <span lang="EN-US" _istranslated="1">Modbus</span> and tunneling protocols. Compile to a static library.</p>

<h4 _msttexthash="182221" _msthash="229"><span lang="EN-US">7.1.3.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">gwmain</span></h4>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="3515720" _msthash="230">Program framework, including core basic functions, configuration, <span lang="EN-US" _istranslated="1">MQTT,</span> etc.</p>

<h4 _msttexthash="311220" _msthash="231"><span lang="EN-US">7.1.3.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">pwprotocol</span></h4>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="3809273" _msthash="232">Plug-in protocol, compiled as a dynamic library. There is a demo protocol driver.</p>

<h4 _msttexthash="130325" _msthash="233"><span lang="EN-US">7.1.3.4<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">home</span></h4>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="38532117" _msthash="234">Hardware-related documents, including model number, serial number, <span lang="EN-US" _istranslated="1">SIM</span> card information, etc., are provided by the hardware and may need to be modified according to the hardware. These files of the source code are placed in a suitable location for use by the virtual machine.</p>

<h4 _msttexthash="264940" _msthash="235"><span lang="EN-US">7.1.3.5<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">interface</span></h4>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="1800318" _msthash="236">Write the interfaces required for protocol drivers.</p>

<h4 _msttexthash="212563" _msthash="237"><span lang="EN-US">7.1.3.6<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;
</span></span><span lang="EN-US">publish</span></h4>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="48440548" _msthash="238">The runtime directory contains the static files required for the configuration file and <span lang="EN-US" _istranslated="1">the www</span> service. The <span lang="EN-US" _istranslated="1">SSL</span> directory is the certificate required for <span lang="EN-US" _istranslated="1">MQTTS</span>, <span lang="EN-US" _istranslated="1">the wwwroot</span> directory is the virtual root directory of <span lang="EN-US" _istranslated="1">the www</span> service, and the <span lang="EN-US" _istranslated="1">ca.cer</span>, <span lang="EN-US" _istranslated="1">server.cer</span>, and <span lang="EN-US" _istranslated="1">server.key</span> are <span lang="EN-US" _istranslated="1">HTTPS</span>Required Certificates.</p>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="5541783" _msthash="239"><span lang="EN-US" _istranslated="1">prefilledkey.txt</span> is the pre-filled key of the national secret <span lang="EN-US" _istranslated="1">SM4</span> (that is, a bunch of keys numbered).</p>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="1286844" _msthash="240">Several <span lang="EN-US" _istranslated="1">JSON</span> files are configuration files.</p>

<h2><a name="_Toc196505365" _msttexthash="59956" _msthash="241"><span lang="EN-US">7.2<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">doc</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="246922" _msthash="242">Documentation.</p>

<h2><a name="_Toc196505366" _msttexthash="236184" _msthash="243"><span lang="EN-US">7.3<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;
</span></span><span lang="EN-US">ManageTools</span></a></h2>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="19710522" _msthash="244">Gateway management tool, stand-alone <span lang="EN-US" _istranslated="1">C#</span> project, contains only configuration files and program entry points, and the substantive functionality is implemented by dependent <span lang="EN-US" _istranslated="1">nuget</span> packages.</p>

<h1><a name="_Toc196505367" _msttexthash="845468" _msthash="245"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>8</span>. Simulation of the whole process</a></h1>

<h2><a name="_Toc196505368" _msttexthash="484874" _msthash="246"><span lang="EN-US" _istranslated="1">8.1<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Create <span lang="EN-US" _istranslated="1">an MQTT</span> service</a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="5200143" _msthash="247">There are no special requirements for <span lang="EN-US" _istranslated="1">MQTT</span> services in this project, for example, <span lang="EN-US" _istranslated="1">EMQX</span> can be used.</p>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="870818" _msthash="248"><span lang="EN-US" _istranslated="1">EMQX</span> is very easy to install and use.</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="1553409" _msthash="249">https://www.emqx.io/zh/downloads?os=Windows</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0">&nbsp;</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="4459" _msthash="250">1</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="1936779" _msthash="251">Download<span lang="EN-US" _istranslated="1"> emqx-5.0.14-windows-amd64.tar.gz </span>and unzip it</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="4550" _msthash="252">2</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="2517879" _msthash="253">Enter the decompression path from the command line and start<span lang="EN-US" _istranslated="1"> EMQX</span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="129831" _msthash="254">cd c:\emqx</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="278980" _msthash="255">./bin/emqx start</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0">&nbsp;</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="1496430" _msthash="256">You can also go to <span lang="EN-US" _istranslated="1">the bin</span> directory to execute it</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="6660914" _msthash="257">Note that the console may not look for command files from the current directory and must be appended with <span lang="EN-US" _istranslated="1">.\</span> or <span lang="EN-US" _istranslated="1">./</span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0">&nbsp;</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="120848" _msthash="258"><span lang="EN-US" _istranslated="1"> Stop</span> stop</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="948688" _msthash="259">Launch and enter the console<span lang="EN-US" _istranslated="1"> console</span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0">&nbsp;</span></p>

<p class="MsoNormal" _msttexthash="540800" _msthash="260"><span lang="EN-US" style="color:#00B0F0" _istranslated="1">Dashboard</span> <span style="color:#00B0F0" _istranslated="1">(<span lang="EN-US" _istranslated="1">web</span> interface).</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="423943" _msthash="261">http://localhost:18083/</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="5018780" _msthash="262">Default username and password: <span lang="EN-US" _istranslated="1">admin/public</span> (in the configuration file in the <span lang="EN-US" _istranslated="1">etc</span> directory)</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="2820038" _msthash="263">After logging in, you will be asked to change your password to <span lang="EN-US" _istranslated="1">admin123</span></span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="5342740" _msthash="264">Set the display language and color in the bottom menu, which can be set to Chinese and bright colors</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="487708" _msthash="265">Create user <span lang="EN-US" _istranslated="1">user/user1234</span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0">&nbsp;</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="7721012" _msthash="266">The default port <span lang="EN-US" _istranslated="1">is 1883</span>, which needs to be modified from the configuration file and needs to be restarted to take effect</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0">&nbsp;</span></p>

<p class="MsoNormal"><span style="color:#00B0F0" _msttexthash="263640" _msthash="267">Client software</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#00B0F0" _msttexthash="469157" _msthash="268">MQTTX-Setup-1.8.0-x64.exe</span></p>

<h2><a name="_Toc196505369" _msttexthash="1047332" _msthash="269"><span lang="EN-US" _istranslated="1">8.2<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Run the gateway program in test mode</a></h2>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="21074495" _msthash="270">Running the gateway program in test mode requires the addition of the "<span lang="EN-US" _istranslated="1">-test</span>" parameter to start the <span lang="EN-US" _istranslated="1">built-in modbus-TCP</span> service. The default settings include access to the <span lang="EN-US" _istranslated="1">built-in modbus-TCP</span> service.</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="546377" _msthash="271">cd ; cd
my/gateway/publish</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="477646" _msthash="272">.. /bin/gwmain.exe
-test</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="4698954" _msthash="273">If the program runs successfully, the first few lines of the output message are as follows:</font></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="2537379" _msthash="274">user@vm-ubuntu:~/my/gateway/publish$
.. /bin/gwmain.exe -test</span></p>

<p class="MsoNormal" _msttexthash="3971435" _msthash="275"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-25
14:15:16 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_t.cpp 
: 133(_main)][0.00]</span>endian:<span lang="EN-US" _istranslated="1">Little-Endian</span></span></p>

<p class="MsoNormal" _msttexthash="4634318" _msthash="276"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-25
14:15:16 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_t.cpp 
: 150(_main)][0.00]</span> Gateway version<span lang="EN-US" _istranslated="1"> 1.0.0 2025.04.15 14:39</span></span></p>

<p class="MsoNormal" _msttexthash="7247201" _msthash="277"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-25
14:15:16 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_t.cpp 
: 152(_main)][0.00]</span>working directory<span lang="EN-US" _istranslated="1"> /home/user/my/gateway/publish</span></span></p>

<p class="MsoNormal" _msttexthash="8069152" _msthash="278"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-25 14:15:16][TEST
SERVER][INFORMATION</span><span style="color:#0F9ED5" _istranslated="1"><span lang="EN-US" _istranslated="1">][gwmain_test.cpp 
: 289(gwmain_test)][0.00]</span> Main Process<span lang="EN-US" _istranslated="1"> 2229 </span>Service Process<span lang="EN-US" _istranslated="1"> 2230</span></span></p>

<p class="MsoNormal" _msttexthash="5337020" _msthash="279"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1">[04-25
14:15:21 [main] [</span><span style="color:#0F9ED5" _istranslated="1">info<span lang="EN-US" _istranslated="1">] [gwmain_test.cpp 
: 352(gwmain_test)][0.00]</span> Service process created</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="517101" _msthash="280">One more service process.</font></p>

<h2><a name="_Toc196505370" _msttexthash="825227" _msthash="281"><span lang="EN-US" _istranslated="1">8.3<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Modify the configuration file</a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="3933917" _msthash="282">The default northbound configuration file <span lang="EN-US" _istranslated="1">defaultNorthConfig.json</span> as follows:</p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5">{</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="219089" _msthash="283">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "func":
"connt",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="91286" _msthash="284">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "data":
{</span></p>

<p class="MsoNormal" _msttexthash="578994" _msthash="285"><span lang="EN-US" style="color:#0F9ED5" _istranslated="1"> "comment":
"</span><span style="color:#0F9ED5" _istranslated="1">Native Testing<span lang="EN-US" _istranslated="1">,</span></span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="191048" _msthash="286">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "type":
"MQTTS",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="481260" _msthash="287">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "platform":
"localtest",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="617175" _msthash="288">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "hostname":
"mqtt.test.com",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="147147" _msthash="289">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "port":
"8883",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="245219" _msthash="290">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "userid":
"user",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="252954" _msthash="291">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "upwd":
"user1234",</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="527735" _msthash="292">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ntp":
"time.windows.com"</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5">}</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="92345266" _msthash="293">The meaning of configuration items is very simple and clear, and you need to set the hostname, port, user name, and password of <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTT</span> correctly. <span lang="EN-US" _mstmutation="1" _istranslated="1">Type</span> indicates the method of connecting to the platform, and the available value is <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTT</span> or <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTTS</span>. "<span lang="EN-US" _mstmutation="1" _istranslated="1">platform</span>" is the name of the platform, which corresponds to the subdirectory with the same name in the <span lang="EN-US" _mstmutation="1" _istranslated="1">SSL</span> directory, if you use <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTTS</span>, you need to replace the certificate file in this directory.</font></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="19435494" _msthash="294">When configured correctly, you should be able to see the client connection from the <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTT server's</span> management tool, and the <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTT</span> client will be able to observe the data sent by the gateway program.</font></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="22016904" _msthash="295">Don't modify the <span lang="EN-US" _mstmutation="1" _istranslated="1">defaultNorthConfig.json</span> directly, copy it as <span lang="EN-US" _mstmutation="1" _istranslated="1">a northConfig.json</span> to modify it. The program first looks for <span lang="EN-US" _mstmutation="1" _istranslated="1">northConfig.json</span>, and will only use <span lang="EN-US" _mstmutation="1" _istranslated="1">defaultNorthConfig.json</span> if it can't find it.</font></p>

<h2><a name="_Toc196505371" _msttexthash="328614" _msthash="296"><span lang="EN-US" _istranslated="1">8.4<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span><span lang="EN-US" _istranslated="1">MQTT topic</span> rules</a></h2>

<table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="border-collapse:collapse;border:none">
 <tbody><tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal"><span lang="EN-US" _msttexthash="368173" _msthash="297">device_gateway/reg</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal" _msttexthash="3873558" _msthash="298">Registration information, <span lang="EN-US" _istranslated="1">which</span> is sent to the platform when the gateway starts</p>
  </td>
 </tr>
 <tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal" _msttexthash="1505465" _msthash="299"><span lang="EN-US" _istranslated="1">device_gateway/</span>gateway serial number<span lang="EN-US" _istranslated="1">/server</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal" _msttexthash="907335" _msthash="300">The platform sends it to the gateway</p>
  </td>
 </tr>
 <tr>
  <td width="277" valign="top" style="width:207.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal" _msttexthash="1492153" _msthash="301"><span lang="EN-US" _istranslated="1">device_gateway/</span>gateway serial number<span lang="EN-US" _istranslated="1">/client</span></p>
  </td>
  <td width="277" valign="top" style="width:207.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" style="margin-bottom:0cm;line-height:normal" _msttexthash="860145" _msthash="302">The gateway is sent to the platform</p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="49664628" _msthash="303">When the gateway starts, a <span lang="EN-US" _mstmutation="1" _istranslated="1">reg</span> is sent to the <span lang="EN-US" _mstmutation="1" _istranslated="1">"device_gateway/reg</span>" for the platform to discover unknown gateways. The registration information is also sent to "<span lang="EN-US" _mstmutation="1" _istranslated="1">device_gateway/</span>gateway serial number<span lang="EN-US" _mstmutation="1" _istranslated="1">/server</span>", so if you do not follow the unknown gateway, you can not subscribe to the "<span lang="EN-US" _mstmutation="1" _istranslated="1">device_gateway/reg</span>" message.</font></p>

<h1><a name="_Toc196505372" _msttexthash="1378624" _msthash="304"><span lang="EN-US" _istranslated="1"><span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span>9</span> Use the gateway management tool <span lang="EN-US" _istranslated="1">ManageTools</span></a></h1>

<h2><a name="_Toc196505373" _msttexthash="671658" _msthash="305"><span lang="EN-US" _istranslated="1">9.1<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Compiling and Configuring</a></h2>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="10407384" _msthash="306"><span lang="EN-US" _istranslated="1">ManageTools</span> is a <span lang="EN-US" _istranslated="1">C# winforms</span> program, which can be compiled and run after opening <span lang="EN-US" _istranslated="1">ManageTools.sln</span> with <span lang="EN-US" _istranslated="1">VS2022</span> and downloading dependencies.</p>

<p class="MsoNormal" style="text-indent:21.0pt" _msttexthash="1837056" _msthash="307">The project is simple, mainly the configuration file:</p>

<p class="MsoNormal"><span lang="EN-US"><img width="554" height="327" src="./ctGateway_DeveloperGuide_files/image001.jpg" alt="graphical user interface, text

The AI-generated content may not be correct." _mstalt="112926866" _msthash="308"></span></p>

<p class="MsoNormal" _msttexthash="6628505" _msthash="309"><span lang="EN-US" _istranslated="1"> northConfig.json</span> is exactly the same as the gateway configuration file (but no default configuration file).</p>

<p class="MsoNormal" _msttexthash="24750557" _msthash="310"><span lang="EN-US" _istranslated="1"> snList.txt</span> contains a known gateway serial number in the format "Serial Number<span lang="EN-US" _istranslated="1"> Name:</span> Display Name". The serial number of the gateway for development has been preset (the serial number on the gateway is from <span lang="EN-US" _istranslated="1">home/sn.txt</span>).</p>

<h2><a name="_Toc196505374" _msttexthash="144820" _msthash="311"><span lang="EN-US" _istranslated="1">9.2<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Startup</a></h2>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="1164189" _msthash="312">The program startup screen is as follows:</font></p>

<p class="MsoNormal"><span lang="EN-US"><img width="553" height="332" src="./ctGateway_DeveloperGuide_files/image002.jpg" alt="Graphical user interfaces, applications

The AI-generated content may not be correct." _mstalt="132299869" _msthash="313"></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="19096363" _msthash="314">Multiple configurations are supported, the configuration file copies a few "<span lang="EN-US" _mstmutation="1" _istranslated="1">data</span>", changes to any other name, and the gateway management tool automatically retrieves all configurations.</font></p>

<h2><a name="_Toc196505375" _msttexthash="288977" _msthash="315"><span lang="EN-US" _istranslated="1">9.3<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Main Interface</a></h2>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="1913873" _msthash="316">After selecting the configuration, it looks like this:</font></p>

<p class="MsoNormal"><span lang="EN-US"><img width="553" height="332" src="./ctGateway_DeveloperGuide_files/image003.jpg" alt="Graphical user interface, application, table

The AI-generated content may not be correct." _mstalt="158598830" _msthash="317"></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="13948688" _msthash="318">On the left is the list of gateways, and on the right is the <span lang="EN-US" _mstmutation="1" _istranslated="1">MQTT</span> messages of the gateway, including uplink and downlink messages, which are automatically scrolled.</font></p>

<h2><a name="_Toc196505376" _msttexthash="326534" _msthash="319"><span lang="EN-US" _istranslated="1">9.4<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Gateway Details</a></h2>

<p class="MsoNormal" style="margin-left:28.8pt" _msttexthash="5003206" _msthash="320">Double-click a gateway in the left list on the main page to open the details window of a gateway:</p>

<p class="MsoNormal"><span lang="EN-US"><img width="554" height="318" src="./ctGateway_DeveloperGuide_files/image004.jpg" alt="Graphical user interface, tables

The AI-generated content may not be correct." _mstalt="114604984" _msthash="321"></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="22809527" _msthash="322">Most of the buttons correspond directly to a message of the interaction protocol. This interface can only be operated on one gateway, and the buttons on the main interface are operated on all selected gateways.</font></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="5294419" _msthash="323">On the left is the basic information of each message, and on the right is the content of the message.</font></p>

<h2><a name="_Toc196505377" _msttexthash="518011" _msthash="324"><span lang="EN-US" _istranslated="1">9.5<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>File Synchronization</a></h2>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="7577830" _msthash="325">"<span lang="EN-US" _mstmutation="1" _istranslated="1">FileSync</span>" is similar to <span lang="EN-US" _mstmutation="1" _istranslated="1">FTP</span>, which can check the status of files on the gateway and transfer files in both directions:</font></p>

<p class="MsoNormal"><span lang="EN-US"><img width="553" height="342" src="./ctGateway_DeveloperGuide_files/image005.jpg" alt="The image contains the graphical user interface

The AI-generated content may not be correct." _mstalt="125842184" _msthash="326"></span></p>

<h2><a name="_Toc196505378" _msttexthash="2033343" _msthash="327"><span lang="EN-US" _istranslated="1">9.6<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>View the internal information of the gateway program</a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="8028228" _msthash="328">The button "<span lang="EN-US" _istranslated="1">show</span>" will send a "<span lang="EN-US" _istranslated="1">show</span>" command to the gateway, and the gateway will return the internal state of the program:</p>

<p class="MsoNormal"><span lang="EN-US"><img width="554" height="331" id="图片 1" src="./ctGateway_DeveloperGuide_files/image006.png" alt="Icon

The AI-generated content may not be correct." _mstalt="61583145" _msthash="329"></span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="12567126" _msthash="330">Contains some important information about internal configuration and when resolving configuration (which can be used to spot configuration issues).</font></p>

<h1><a name="_Toc196505379" _msttexthash="502840" _msthash="331"><span lang="EN-US" _istranslated="1">10<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Source Code Guidelines</a></h1>

<h2><a name="_Toc196505380" _msttexthash="225082" _msthash="332"><span lang="EN-US" _istranslated="1">10.1<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Compile <span lang="EN-US" _istranslated="1">CTFC</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="3368287" _msthash="333">For the compilation of <span lang="EN-US" _istranslated="1">CTFC</span>, please refer to the <span lang="EN-US" _istranslated="1">make.sh</span> in the <span lang="EN-US" _istranslated="1">CTFC</span> directory:</p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="160862" _msthash="334">cd platform</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="720915" _msthash="335">make -f makefile.mk
linux debug</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="30771" _msthash="336">cd ..</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="61841" _msthash="337">cd src</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="156000" _msthash="338">chmod 755 *.sh</span></p>

<p class="MsoNormal"><span lang="EN-US" style="color:#0F9ED5" _msttexthash="147056" _msthash="339">makeall.sh</span></p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="10407332" _msthash="340">In fact, it is to go to <span lang="EN-US" _mstmutation="1" _istranslated="1">the platform</span> directory to set the compilation parameters, and then go to the <span lang="EN-US" _mstmutation="1" _istranslated="1">strc</span> directory to execute <span lang="EN-US" _mstmutation="1" _istranslated="1">the makeall.sh</span>.</font></p>

<p class="MsoNormal" _msttexthash="12797343" _msthash="341"><span lang="EN-US" _istranslated="1"> makeall.sh</span> main function is to compile each directory, and the compilation method for each directory is to copy the <span lang="EN-US" _istranslated="1">makefile.mk</span> to <span lang="EN-US" _istranslated="1">a makefile</span> and <span lang="EN-US" _istranslated="1">then make</span>.</p>

<p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font _mstmutation="1" _msttexthash="6069193" _msthash="342">So in fact, this compilation system is the original <span lang="EN-US" _mstmutation="1" _istranslated="1">make</span>, and a little automation is achieved through <span lang="EN-US" _mstmutation="1" _istranslated="1">sh</span>.</font></p>

<h2><a name="_Toc196505381" _msttexthash="358878" _msthash="343"><span lang="EN-US" _istranslated="1">10.2<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Compile <span lang="EN-US" _istranslated="1">gateway</span></a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="4720859" _msthash="344"><span lang="EN-US" _istranslated="1">gateway</span> calls <span lang="EN-US" _istranslated="1">the compilation system of CTFC</span>, and the compilation entry is also <span lang="EN-US" _istranslated="1">makeall.sh</span>.</p>

<h2><a name="_Toc196505382" _msttexthash="620373" _msthash="345"><span lang="EN-US" _istranslated="1">10.3<span style="font:7.0pt &quot;Times New Roman&quot;" _istranslated="1"> </span></span>Source Code Entry Points</a></h2>

<p class="MsoNormal" style="margin-left:21.0pt" _msttexthash="5093790" _msthash="346">The entry point of the <span lang="EN-US" _istranslated="1">gateway</span> is the <span lang="EN-US" _istranslated="1">main</span> function of <span lang="EN-US" _istranslated="1">the gwmain_t.cpp</span> in the <span lang="EN-US" _istranslated="1">gwmain</span> directory.</p>

</div>




</body></html>