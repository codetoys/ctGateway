<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:等线;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"等线 Light";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:新宋体;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@等线 Light";}
@font-face
	{font-family:"\@等线";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@新宋体";}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
h1
	{mso-style-link:"标题 1 字符";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:等线;}
h2
	{mso-style-link:"标题 2 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-28.8pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";}
h3
	{mso-style-link:"标题 3 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:等线;}
h4
	{mso-style-link:"标题 4 字符";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:43.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-43.2pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"等线 Light";}
h5
	{mso-style-link:"标题 5 字符";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:50.4pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-50.4pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:等线;}
h6
	{mso-style-link:"标题 6 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:57.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-57.6pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"等线 Light";}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"标题 7 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:64.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-64.8pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:等线;
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"标题 8 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:72.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-72.0pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"等线 Light";}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"标题 9 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:79.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-79.2pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"等线 Light";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"标题 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:16.0pt;
	font-family:"等线 Light";
	font-weight:bold;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"副标题 字符";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:130%;
	font-size:16.0pt;
	font-family:等线;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:等线;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";
	color:#2F5496;}
span.a
	{mso-style-name:"标题 字符";
	mso-style-link:标题;
	font-family:"等线 Light";
	font-weight:bold;}
span.1
	{mso-style-name:"标题 1 字符";
	mso-style-link:"标题 1";
	font-weight:bold;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-link:"标题 2";
	font-family:"等线 Light";
	font-weight:bold;}
span.a0
	{mso-style-name:"副标题 字符";
	mso-style-link:副标题;
	font-weight:bold;}
.MsoChpDefault
	{font-family:等线;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link="#0563C1" vlink="#954F72" style='word-wrap:break-word;
text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoTitle><a name="_Toc196346362"><span lang=EN-US>ctGateway</span>网关技术说明书</a></p>

<p class=MsoSubtitle><a name="_Toc196346363"><span lang=EN-US>2025.4.23 </span>版本<span
lang=EN-US>1.0</span></a></p>

<p class=MsoTitle><a name="_Toc196346364">更新记录</a></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=94 valign=top style='width:70.65pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>时间</span></p>
  </td>
  <td width=340 valign=top style='width:9.0cm;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>内容</span></p>
  </td>
  <td width=119 valign=top style='width:89.0pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>章节</span></p>
  </td>
 </tr>
 <tr>
  <td width=94 valign=top style='width:70.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2025.4.23</span></p>
  </td>
  <td width=340 valign=top style='width:9.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>支持的协议增加智能电表<span lang=EN-US>DLT645</span>，<span
  lang=EN-US>S7</span>和<span lang=EN-US>OPC-UA</span>基础功能实现</p>
  </td>
  <td width=119 valign=top style='width:89.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3.4</span></p>
  </td>
 </tr>
</table>

<p class=MsoTocHeading align=center style='text-align:center'>目录</p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346362">ctGateway<span
lang=EN-US><span lang=EN-US>网关技术说明书</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346363">2025.4.23 <span
lang=EN-US><span lang=EN-US>版本1.0</span></span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346364"><span lang=EN-US><span
lang=EN-US>更新记录</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346365">1<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>概述</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346366">2<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>核心概念</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346367">3<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>功能</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346368">3.1<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>支持的系统</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346369">3.2<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>支持的平台通讯载体</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346370">3.3<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>支持的平台</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346371">3.4<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>支持的设备协议</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346372">3.5<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>支持的数据采集功能</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346373">3.6<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>昆仑通态触摸屏设备信息导出文件支持</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346374">3.7<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>压缩</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346375">3.8<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>加密</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346376">4<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>性能指标</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346377">4.1<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>实时性</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346378">4.2<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>支持的设备数量</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346379">4.3<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>流量估计</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346380">5<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>文件组成</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346381">5.1<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>系统文件</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346382">5.2<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>程序文件</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc196346383">6<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>设计细节</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346384">6.1<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>设备发现</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346385">6.2<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>LED<span
lang=EN-US><span lang=EN-US>状态</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346386">6.3<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>复位按钮</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346387">6.4<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>数据序列号</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346388">6.5<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>数据断电不丢失</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346389">6.6<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>数据断网不丢失</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346390">6.7<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>在线升级</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc196346391">6.8<span
style='font-size:11.0pt;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><span lang=EN-US>可靠性设计</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc196346365"><span lang=EN-US>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>概述</a></h1>

<p class=MsoNormal style='text-indent:21.0pt'>网关程序以<span lang=EN-US>C++</span>实现，使用<span
lang=EN-US>utf-8</span>字符集，平台必须使用<span lang=EN-US>utf-8</span>字符集。设备采用的字符集与网关和平台无关，设备通道数据为字符串的，可以通过参数配置指定传输方式或自动转换字符集。</p>

<p class=MsoNormal style='text-indent:21.0pt'>支持<span lang=EN-US>Modbus</span>和透传，支持<span
lang=EN-US>MQTT</span>和<span lang=EN-US>MQTTS</span>。</p>

<p class=MsoNormal style='text-indent:21.0pt'>日志文件和数据文件大小受限，确保不出现磁盘满故障。</p>

<p class=MsoNormal style='text-indent:21.0pt'>数据即时存盘，确保断电不丢失。</p>

<p class=MsoNormal style='text-indent:21.0pt'>数据序号和确认机制保证网关到平台不存在数据丢失。</p>

<p class=MsoNormal style='text-indent:21.0pt'>断网存储能力取决于数据量，网关支持数据压缩。</p>

<h1><a name="_Toc196346366"><span lang=EN-US>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>核心概念</a></h1>

<p class=MsoNormal><span lang=EN-US><img width=563 height=325
src="ctGateway_TechnicalSpecifications.files/image001.png"></span></p>

<h1><a name="_Toc196346367"><span lang=EN-US>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>功能</a></h1>

<h2><a name="_Toc196346368"><span lang=EN-US>3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>支持的系统</a></h2>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=104 valign=top style='width:77.95pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>系统</span></p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>支持状态</span></p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=104 valign=top style='width:77.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>Linux/Arm64</span></p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>优先支持，全部功能</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>精简版<span lang=EN-US>Linux</span>，依赖的库需要自行编译</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=104 valign=top style='width:77.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>Linux/Arm</span></p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>完成基本测试，能运行，能上报<span lang=EN-US>modbus_tcp</span>数据</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>完整<span lang=EN-US>Linux</span>，可以直接安装所需的包</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3</span></p>
  </td>
  <td width=104 valign=top style='width:77.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc196346369"><span lang=EN-US>3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>支持的平台通讯载体</a></h2>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>协议名称</span></p>
  </td>
  <td width=226 valign=top style='width:169.6pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>支持状态</span></p>
  </td>
  <td width=138 valign=top style='width:103.7pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>MQTT</span></p>
  </td>
  <td width=226 valign=top style='width:169.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经：<span lang=EN-US>MQTT</span></p>
  <p class=MsoNormal>已经：<span lang=EN-US>MQTTS</span></p>
  </td>
  <td width=138 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>HTTP</span></p>
  </td>
  <td width=226 valign=top style='width:169.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>计划：</p>
  </td>
  <td width=138 valign=top style='width:103.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>依赖平台</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc196346370"><span lang=EN-US>3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>支持的平台</a></h2>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>平台名称</span></p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>支持的功能</span></p>
  </td>
  <td width=175 valign=top style='width:131.55pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>演示平台</p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>全部指令</p>
  </td>
  <td width=175 valign=top style='width:131.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>即配套的管理工具</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=189 valign=top style='width:5.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=175 valign=top style='width:131.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

<h2><a name="_Toc196346371"><span lang=EN-US>3.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>支持的设备协议</a></h2>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>协议名称</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>支持状态</span></p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>Modbus</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经：<span lang=EN-US>TCP</span>、<span lang=EN-US>RTU</span>、<span
  lang=EN-US>RTU_TCP</span></p>
  <p class=MsoNormal>不确定：<span lang=EN-US>ASCII</span></p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>目前使用的协议库不支持<span lang=EN-US>Modbus-ASCII</span>，用得很少</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>透明传输</p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经：<span lang=EN-US>TCP</span>、串口</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>上报接收到的任何数据</p>
  <p class=MsoNormal>通过平台下发任何数据</p>
  <p class=MsoNormal>定时发送指令</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>智能电表</p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经：<span lang=EN-US>DLT645-1997</span>、<span lang=EN-US>DLT645-2007</span></p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>4</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>西门子<span lang=EN-US>S7</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>即将</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>基础功能模块已并入，尚未实现配置部分</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>OPCUA</span></p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>即将</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>基础功能模块已并入，尚未实现配置部分</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>4</span></p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>定制</p>
  </td>
  <td width=217 valign=top style='width:163.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>计划</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>可随意定制</p>
  </td>
 </tr>
</table>

<h2><a name="_Toc196346372"><span lang=EN-US>3.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>支持的数据采集功能</a></h2>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>名称</span></p>
  </td>
  <td width=161 valign=top style='width:120.5pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>支持状态</span></p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>周期上报</p>
  </td>
  <td width=161 valign=top style='width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>每隔设定时间上报一次</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>变化上报</p>
  </td>
  <td width=161 valign=top style='width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>以设定的周期（毫秒，低于每次采集时间则等同于循环采集）</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>依赖上报</p>
  </td>
  <td width=161 valign=top style='width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>当依赖的通道上报时上报（通常依赖的通道是变化上报类型）</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>4</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>变化时重新采集全部</p>
  </td>
  <td width=161 valign=top style='width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已经</p>
  </td>
  <td width=204 valign=top style='width:152.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
</table>

<h2><a name="_Toc196346373"><span lang=EN-US>3.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>昆仑通态触摸屏设备信息导出文件支持</a></h2>

<p class=MsoNormal style='text-indent:21.0pt'>支持直接导入昆仑通态触摸屏的导出文件，目前直接根据<span
lang=EN-US style='font-size:9.5pt;font-family:新宋体;color:#2E75B6'>deviceCode</span>对应的<span
lang=EN-US>csv</span>文件导入，自动进行本地编码到<span lang=EN-US>UTF-8</span>的转换（不要提前转换编码）。</p>

<p class=MsoNormal style='text-indent:21.0pt'>通道采集频次原始值通常是<span lang=EN-US>1</span>，表示不特别设定（跟随设备的周期设定）。修改为以下范围实现特定功能：</p>

<p class=MsoListParagraph style='margin-left:43.0pt;text-indent:-22.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>1XX</span>代表差异上传，其中<span lang=EN-US>XX</span>代表百分比。<span
lang=EN-US>100</span>代表不同即上传。</p>

<p class=MsoListParagraph style='margin-left:43.0pt;text-indent:-22.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>2XX</span>代表差异时上传全部。</p>

<p class=MsoListParagraph style='margin-left:43.0pt;text-indent:-22.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>5XXXX</span>代表依赖上传，<span lang=EN-US>XXXX</span>代表依赖的通道序号。</p>

<p class=MsoNormal style='text-indent:21.0pt'>目前以通道序号为<span lang=EN-US>channelNo</span>和<span
lang=EN-US>paramCode</span>。</p>

<h2><a name="_Toc196346374"><span lang=EN-US>3.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>压缩</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>支持数据压缩，以便减少数据流量。默认未启用压缩。使用<span
lang=EN-US>zlib</span>压缩。</p>

<h2><a name="_Toc196346375"><span lang=EN-US>3.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>加密</a></h2>

<p class=MsoNormal style='text-indent:21.0pt'>通过加密防止不安全的传输过程。默认不对注册、心跳和上报数据加密。使用<span
lang=EN-US>AES256-CBC</span>加密或国密<span lang=EN-US>sm4</span>加密</p>

<h1><a name="_Toc196346376"><span lang=EN-US>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>性能指标</a></h1>

<h2><a name="_Toc196346377"><span lang=EN-US>4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>实时性</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>网关以设定最小周期激活<span lang=EN-US>+</span>事件触发方式运行，时间控制单位为毫秒，符合实时要求。</p>

<p class=MsoNormal style='text-indent:21.0pt'>下发操作以事件触发方式接收、在下一轮扫描时优先运行，最大延迟<span
lang=EN-US>=</span>网络传输时间<span lang=EN-US>+</span>一轮扫描时间。</p>

<p class=MsoNormal style='text-indent:21.0pt'>一轮扫描时间大约<span lang=EN-US>=</span>通道数<span
lang=EN-US>*15</span>毫秒（此为实测结果，<span lang=EN-US>185</span>个通道不到<span
lang=EN-US>3</span>秒，保持寄存器每次读取大约<span lang=EN-US>15</span>毫秒，绝大部分耗时确实在读取操作本身）。</p>

<p class=MsoNormal style='text-indent:21.0pt'>支持连续地址读取优化。连续地址一次性采集，可显著缩短采集时间。</p>

<h2><a name="_Toc196346378"><span lang=EN-US>4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>支持的设备数量</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>程序对设备数量和通道数量无限制，仅受硬件接口限制。</p>

<h2><a name="_Toc196346379"><span lang=EN-US>4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>流量估计</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>支持数据压缩。</p>

<p class=MsoNormal style='text-indent:21.0pt'>实测<span lang=EN-US>185</span>个通道的上报数据大约<span
lang=EN-US>10K</span>。按照通常的每分钟一次的采集频率，一天<span lang=EN-US>=60*24*10K=14M</span>，一个月<span
lang=EN-US>=420M</span>。</p>

<p class=MsoNormal style='text-indent:21.0pt'>此类数据一般压缩比比较高，可以减少<span
lang=EN-US>80-90%</span>。</p>

<p class=MsoNormal style='text-indent:21.0pt'>实测大约<span lang=EN-US>10K</span>的一条数据压缩率<span
lang=EN-US>90%</span>，使用<span lang=EN-US>base64</span>编码后<span lang=EN-US>85%</span>（<span
lang=EN-US>base64</span>编码会增大三分之一），小于<span lang=EN-US>200</span>字节的数据压缩无意义（程序可以根据实际效果选择传输方式，需要平台支持）。</p>

<h1><a name="_Toc196346380"><span lang=EN-US>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>文件组成</a></h1>

<h2><a name="_Toc196346381"><span lang=EN-US>5.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>系统文件</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>系统文件由硬件提供，不同网关有所不同。</p>

<p class=MsoNormal style='margin-left:21.0pt'>以下为某一个硬件的情形：</p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>文件名称</span></p>
  </td>
  <td width=161 valign=top style='width:120.45pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>功能</span></p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>/home/sn.txt</span></p>
  </td>
  <td width=161 valign=top style='width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>型号 序列号</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>静态文件</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>/home/sysInfo.txt</span></p>
  </td>
  <td width=161 valign=top style='width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>SIM</span>卡号 信号强度</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>动态文件</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3</span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>/home/run/start.sh</span></p>
  </td>
  <td width=161 valign=top style='width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>启动脚本</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>系统启动时执行（内容由应用系统提供）</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>4</span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>/home/run/publish.tar.bz2</span></p>
  </td>
  <td width=161 valign=top style='width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>原始程序</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>正常程序运行失败会自动运行原始程序</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>5</span></p>
  </td>
  <td width=132 valign=top style='width:99.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>/home/backup/ led_gpio.txt</span></p>
  </td>
  <td width=161 valign=top style='width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>Led</span>操作说明</p>
  </td>
 </tr>
</table>

<h2><a name="_Toc196346382"><span lang=EN-US>5.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>程序文件</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>程序自身的所有文件基于单一目录“<span lang=EN-US>/home/root/publish</span>”。</p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>序号</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>文件名称</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>功能</span></p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border:solid windowtext 1.0pt;
  border-left:none;background:#5B9BD5;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='color:black'>说明</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>1</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>gwmian.exe</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>主程序</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>-auto </span>网关自启动脚本使用，禁止交互输入</p>
  <p class=MsoNormal><span lang=EN-US>-test </span>启动内置<span lang=EN-US>modbusTCP</span>测试服务（可供默认设备采集）</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>2</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>appConfig.json</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>应用配置</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>文件大小限制等</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>3</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>northConfig.json</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>平台配置（北向配置）</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>平台连接参数</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>4</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>defaultNorthConfig.json</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>默认配置</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>5</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>DeviceConfig.json</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备配置（南向配置）</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>数据采集配置</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>6</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>gwmain.log</span></p>
  <p class=MsoNormal><span lang=EN-US>gwmain.log.log</span></p>
  <p class=MsoNormal><span lang=EN-US>gwmain.log.log.bz2</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>日志文件</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>文件总大小不超过应用配置的限制</p>
  <p class=MsoNormal><span lang=EN-US>gwmain.log.log</span>会被压缩成<span
  lang=EN-US>gwmain.log.log.bz2</span></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>7</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>data.dat</span></p>
  <p class=MsoNormal><span lang=EN-US>data2.dat</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>数据文件</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>文件总大小不超过应用配置的限制</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=47 valign=top style='width:35.2pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>8</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>SSL/</span></p>
  </td>
  <td width=151 valign=top style='width:4.0cm;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>证书文件</p>
  </td>
  <td width=213 valign=top style='width:159.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>用于<span lang=EN-US>MQTTS</span>的证书文件，每个平台一个子目录</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc196346383"><span lang=EN-US>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>设计细节</a></h1>

<h2><a name="_Toc196346384"><span lang=EN-US>6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>设备发现</a></h2>

<p class=MsoNormal style='text-indent:21.0pt'>为了使未知<span lang=EN-US>IP</span>地址的设备可以被发现，设备周期性向端口<span
lang=EN-US>9999</span>发送<span lang=EN-US>UDP</span>广播（物理网络和所有配置的网段，具体效果与网络管理设备有关）。</p>

<p class=MsoNormal style='text-indent:21.0pt'>网线直连的<span lang=EN-US>PC</span>可以通过抓包工具看到源信息从而发现设备。目前的手段依赖第三方库的安装。</p>

<p class=MsoNormal style='text-indent:21.0pt'>计划：<span lang=EN-US>PC</span>端配置程序实现。</p>

<h2><a name="_Toc196346385"><span lang=EN-US>6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>LED</span>状态</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>某款硬件具有<span lang=EN-US>9</span>个<span
lang=EN-US>LED</span>灯，全部为绿色，功能如下：</p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=184 valign=top style='width:138.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>系统使用</p>
  </td>
  <td width=184 valign=top style='width:138.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备<span lang=EN-US>2</span>连接状态</p>
  </td>
  <td width=184 valign=top style='width:138.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备<span lang=EN-US>5</span>连接状态</p>
  </td>
 </tr>
 <tr>
  <td width=184 valign=top style='width:138.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>系统使用</p>
  </td>
  <td width=184 valign=top style='width:138.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备<span lang=EN-US>1</span>连接状态</p>
  </td>
  <td width=184 valign=top style='width:138.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备<span lang=EN-US>4</span>连接状态</p>
  </td>
 </tr>
 <tr>
  <td width=184 valign=top style='width:138.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>系统使用</p>
  </td>
  <td width=184 valign=top style='width:138.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>平台连接状态</p>
  </td>
  <td width=184 valign=top style='width:138.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备<span lang=EN-US>3</span>连接状态</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>左侧三个由系统使用，其余六个由程序使用。</p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>状态表：</p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=66 valign=top style='width:49.4pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>常灭</p>
  </td>
  <td width=123 valign=top style='width:92.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>常亮</p>
  </td>
  <td width=223 valign=top style='width:166.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>闪烁</p>
  </td>
 </tr>
 <tr>
  <td width=66 valign=top style='width:49.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>平台</p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>未连接</p>
  </td>
  <td width=123 valign=top style='width:92.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>注册成功</p>
  </td>
  <td width=223 valign=top style='width:166.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>已连接，未注册</p>
  </td>
 </tr>
 <tr>
  <td width=66 valign=top style='width:49.4pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备</p>
  </td>
  <td width=142 valign=top style='width:106.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>所在接口未连接</p>
  </td>
  <td width=123 valign=top style='width:92.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备读到数据</p>
  </td>
  <td width=223 valign=top style='width:166.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal>设备未读到数据（接口已连接）</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>闪烁为亮灭各持续一秒，不停循环。</p>

<h2><a name="_Toc196346386"><span lang=EN-US>6.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>复位按钮</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>厂家尚未完成。</p>

<p class=MsoNormal style='margin-left:21.0pt'>计划提供恢复北向配置和恢复出厂设置两个功能。</p>

<h2><a name="_Toc196346387"><span lang=EN-US>6.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>数据序列号</a></h2>

<p class=MsoNormal style='text-indent:21.0pt'>数据序列号标识一条数据，<span lang=EN-US>1</span>开始递增。网关记录已确认的序列号、下一个序列号和已发送的序列号。</p>

<p class=MsoNormal style='text-indent:21.0pt'>数据序列号是实现数据不丢失的基础。</p>

<h2><a name="_Toc196346388"><span lang=EN-US>6.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>数据断电不丢失</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>数据先存盘、后发送，这样可以保证断电不丢失数据。</p>

<h2><a name="_Toc196346389"><span lang=EN-US>6.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>数据断网不丢失</a></h2>

<p class=MsoNormal style='text-indent:21.0pt'>由于网关和平台中间的<span lang=EN-US>MQTT</span>是不保存数据，没有订阅者直接丢弃，<span
lang=EN-US>MQTT</span>也无法确保断电不丢失数据，所以网关通过平台确认消息来确认平台接收了数据。平台无需每条数据即时确认，只需在网关存储写满前确认即可。</p>

<p class=MsoNormal style='text-indent:21.0pt'>网关收到平台确认后方可清理已确认的数据。网关上存在的历史数据平台可以重新获取。</p>

<p class=MsoNormal style='text-indent:21.0pt'>如果网关存储写满，后果是不确定的。网关可能停止写入新数据，也可能删除旧数据。</p>

<h2><a name="_Toc196346390"><span lang=EN-US>6.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>在线升级</a></h2>

<p class=MsoNormal style='text-indent:21.0pt'>启动脚本将程序文件复制到临时存储空间（此空间不是存储，掉电丢失），因此程序可以文件可以复制。</p>

<p class=MsoNormal style='text-indent:21.0pt'>保存一份原始文件，以免升级失败变砖（由于大文件被拆分传送，升级失败概率似乎挺高）。</p>

<p class=MsoNormal style='text-indent:21.0pt'>目前升级是手动的，选择文件上传到网关，然后发送重启命令生效。</p>

<h2><a name="_Toc196346391"><span lang=EN-US>6.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>可靠性设计</a></h2>

<p class=MsoNormal style='margin-left:21.0pt'>本程序用多种机制防止硬件挂死。建议硬件自身有看门狗机制。</p>

<p class=MsoNormal style='margin-left:21.0pt'>软件层面有以下几层保护：</p>

<p class=MsoListParagraph style='margin-left:39.0pt;text-indent:-18.0pt'><span
lang=EN-US>1，<span style='font:7.0pt "Times New Roman"'> </span></span>启动脚本，程序失败运行出厂配置，保证设备不失联</p>

<p class=MsoListParagraph style='margin-left:39.0pt;text-indent:-18.0pt'><span
lang=EN-US>2，<span style='font:7.0pt "Times New Roman"'> </span></span>主程序双进程，一个监控一个工作，监控进程根据工作进程的状态决定如何处理</p>

<p class=MsoListParagraph style='margin-left:39.0pt;text-indent:-18.0pt'><span
lang=EN-US>3，<span style='font:7.0pt "Times New Roman"'> </span></span>超时未能连接到平台重启网关</p>

<p class=MsoListParagraph style='margin-left:39.0pt;text-indent:-18.0pt'><span
lang=EN-US>4，<span style='font:7.0pt "Times New Roman"'> </span></span>超时没有收到平台任何消息重启网关</p>

<p class=MsoListParagraph style='margin-left:39.0pt;text-indent:-18.0pt'><span
lang=EN-US>5，<span style='font:7.0pt "Times New Roman"'> </span></span>存储写入出错删除旧日志文件</p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US>&nbsp;</span></p>

</div>

</body>

</html>
